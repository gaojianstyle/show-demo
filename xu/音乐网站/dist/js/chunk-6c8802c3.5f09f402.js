(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c8802c3"],{"0adf":function(t,e,n){},"16e6":function(t,e,n){"use strict";n("0adf")},"1bbb":function(t,e,n){},ddc7:function(t,e,n){"use strict";n("386d"),n("673e"),n("7f7f");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list-detail-container",on:{scroll:t.getShowIndex}},[!t.listInfo&&t.loading&&0===t.list.length?e("div",{staticClass:"text-center fc_fff ft_20",staticStyle:{"padding-top":"100px",opacity:"0.8","letter-spacing":"2px"}},[t._v("拼命查找了！")]):t._e(),t.loading?t._e():e("div",{staticClass:"list-info-detail"},[t.listInfo?e("div",[e("img",{staticClass:"list-info-cover",attrs:{src:t.listInfo.cover}}),e("div",{staticClass:"list-info-txt"},[e("div",{staticClass:"list-info-name"},[t._v(t._s(t.listInfo.name))]),e("div",{staticClass:"list-info-creator"},[t.userList[t.platform]&&!t.userList[t.platform].mine[t.listId]?e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.userList[t.platform].sub[t.listId]?"已收藏":"收藏",placement:"top"}},[e("i",{class:"collect-btn mr_10 iconfont icon-".concat(t.userList[t.platform].sub[t.listId]?"collected":"collect"),on:{click:function(e){return t.collectPlaylist(t.listInfo)}}})]):t._e(),t.listInfo.creator?e("span",[t._v("By "),e("span",{staticClass:"creator-name"},[t._v(t._s(t.listInfo.creator.nick))])]):t._e()],1),e("div",{staticClass:"list-desc"},[t._v(t._s(t.listInfo.desc))])])]):t._e(),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-input",attrs:{type:"text",placeholder:"找呀找呀找歌曲"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("div",{staticClass:"inline-block mt_15 pt_5"},[t._v("下列歌曲：")]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"播放",placement:"top"}},[t.list.length>0?e("div",{staticClass:"inline-block mt_15 pt_5 pointer play",staticStyle:{"line-height":"20px"},on:{click:function(e){return t.playListShow(!0)}}},[e("i",{staticClass:"iconfont icon-play pl_10 pr_10"})]):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加到播放列表",placement:"top"}},[t.list.length>0?e("div",{staticClass:"inline-block mt_15 pt_5 pointer play",staticStyle:{"line-height":"20px"},on:{click:function(e){return t.playListShow()}}},[e("i",{staticClass:"iconfont icon-list-add pl_10 pr_10"})]):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载",placement:"top"}},[t.list.length>0?e("div",{staticClass:"inline-block mt_15 pt_5 pointer play",staticStyle:{"line-height":"20px"},on:{click:t.downShow}},[e("i",{staticClass:"iconfont icon-download pl_10 pr_10"})]):t._e()])],1)]),t.list.length?e("div",{staticClass:"song-list"},[e("div",{style:"height:".concat(71*t.smallIndex,"px;")}),t._l(t.list,(function(n,i){return t.allSongs[n]&&i>=t.smallIndex&&i<=t.bigIndex?e("div",{key:"".concat(n,"-").concat(i),class:"song-item ".concat(t.playNow.aId===n?"played":""," ").concat(t.allSongs[n].url?"":"disabled"," ").concat(i<t.smallIndex||i>t.bigIndex?"hidden":""),on:{click:function(e){return t.playMusic({id:n,arr:t.trueList,listId:t.listId,isDetail:!0})}}},[t.playNow.aId===n?e("div",{staticClass:"playing-bg",style:"width: ".concat(100*t.playingPercent,"%")},[e("div",{staticClass:"wave-bg"}),e("div",{staticClass:"wave-bg2"})]):t._e(),e("span",{staticClass:"song-order"},[t._v(t._s(i+1))]),e("img",{staticClass:"song-cover",attrs:{src:"".concat(t.allSongs[n].al&&t.allSongs[n].al.picUrl,"?param=50y50"),alt:""}}),e("span",{staticClass:"song-name"},[t._v(t._s(t.allSongs[n].name))]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"mv",placement:"top"}},[t.allSongs[n].mvId?e("a",{staticClass:"song-mv iconfont icon-mv",attrs:{href:t.changeUrlQuery({id:t.allSongs[n].mvId,from:t.allSongs[n].platform},"#/mv",!1)}}):t._e()]),e("span",{staticClass:"song-artist"},[t._v(t._s((t.allSongs[n].ar||[]).map((function(t){return t.name})).join("/")))]),e("div",{staticClass:"icon-container"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"喜欢",placement:"top"}},[t.userList[t.allSongs[n].platform]&&t.listId!==t.userList[t.allSongs[n].platform].favListId?e("i",{class:"operation-icon operation-icon-1 iconfont icon-".concat(t.favSongMap[t.allSongs[n].platform][n]?"like":"unlike"),on:{click:function(e){return t.likeMusic(n)}}}):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加到歌单",placement:"top"}},["migu"!==t.allSongs[n].from?e("i",{staticClass:"operation-icon operation-icon-2 iconfont icon-add",on:{click:function(e){return t.playlistTracks(n,t.listId,"add","ADD_SONG_2_LIST",t.allSongs[n].platform)}}}):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"移出播放列表",placement:"top"}},[t.playingList.map[n]?e("i",{staticClass:"operation-icon operation-icon-3 iconfont icon-list-reomve",on:{click:function(e){return t.removePlaying(n)}}}):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"加入播放列表",placement:"top"}},[t.allSongs[n].url&&!t.playingList.map[n]?e("i",{staticClass:"operation-icon operation-icon-3 iconfont icon-list-add",on:{click:function(e){return t.addPlaying(n)}}}):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载",placement:"top"}},[t.allSongs[n].url?e("i",{staticClass:"operation-icon operation-icon-4 iconfont icon-download",on:{click:function(e){return t.download(n)}}}):t._e()]),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"从歌单中删除",placement:"top"}},[t.isMineList?e("i",{staticClass:"operation-icon operation-icon-5 iconfont icon-delete",on:{click:function(e){return t.playlistTracks(n,t.aId,"del","DEL_SONG")}}}):t._e()])],1)],1):t._e()})),e("div",{style:"min-height:0;height:".concat(71*(t.list.length-t.bigIndex),"px;")}),t.list.indexOf(t.playNow.aId)>-1?e("div",{staticClass:"focus-btn",on:{click:t.scrollToPlayNow}},[e("i",{staticClass:"iconfont icon-focus"})]):t._e(),"playing"===t.id&&t.playNow&&t.list.length>1?e("div",{staticClass:"clear-btn",on:{click:t.clearPlaying}},[e("i",{staticClass:"iconfont icon-delete"})]):t._e()],2):t._e()])},a=[],s=(n("8e6e"),n("456d"),n("20d6"),n("a481"),n("ac6a"),n("ade3")),o=n("ceb6"),c=n("2f62"),l=n("f503"),r=n("0828");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(s["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={name:"PlayListDetail",data:function(){return{search:"",list:[],smallIndex:0,bigIndex:0,showScrollTo:!1}},props:{id:String,listId:String,platform:String,loading:Boolean,listInfo:Object,trueList:Array},computed:f(f({},Object(c["b"])({allList:"getAllList",playingList:"getPlayingList",userList:"getUserList",qUserList:"getQUserList",allSongs:"getAllSongs",playNow:"getPlaying",user:"getUser",playingPercent:"getPlayingPercent",favSongMap:"getFavSongMap"})),{},{aId:function(){return"".concat(this.platform,"_").concat(this.id)},isMineList:function(){var t=this.platform,e=this.userList,n=this.aId;return!!(e[t]&&e[t].mine&&e[t].mine[n])}}),watch:{trueList:function(){this.searchList()},list:function(){this.$nextTick(this.getShowIndex)},search:function(){this.searchList()}},created:function(){this.trueList.length&&this.searchList()},methods:f(f({playListShow:function(t){var e=this.allSongs,n=this.list,i=this.listId,a=this.$store.dispatch,s=e[n[0]];s.url&&(t?(a("updatePlayNow",s),a("updatePlayingList",{list:n,listId:i}),a("updatePlayingStatus",!0)):(a("updatePlayingList",{list:n,more:!0}),this.$message.success("已添加到正在播放")))},downShow:function(){var t=this,e=this.allSongs,n=this.list,i=n.filter((function(t){return!!e[t].url}));if(!i.length)return this.$message.info("没有歌呢");this.$confirm("批量下载".concat(i.length,"首歌曲？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message.info("为了防止服务器误封高频ip，批量下载一秒增加一个任务"),i.forEach((function(t,e){setTimeout((function(){return Object(o["e"])(t)}),1e3*e)}))}))},searchList:function(){var t=this.search,e=this.trueList,n=this.allSongs,i=t.replace(/\/|\s|\t|,|，|-|/g,"").toLowerCase(),a=e||[];if(!i)return this.showScrollTo=-1!==a.indexOf(this.playNow.aId),this.list=a;this.list=a.filter((function(t){return"".concat(n[t].name,"\n          ").concat((n[t].ar||[]).map((function(t){return t.name})),"\n          ").concat(n[t].al.name,"\n          ").concat(n[t].name,"\n          ").concat(n[t].al.name,"\n          ").concat((n[t].ar||[]).map((function(t){return t.name})),"\n          ").concat(n[t].name).replace(/\s/g,"").toLowerCase().indexOf(i)>-1}))},likeMusic:o["m"],playlistTracks:function(t,e,n,i,a){window.event.stopPropagation(),this.$store.dispatch("setOperation",{data:{tracks:t,pid:e,op:n},type:i,platform:a})},download:o["e"],collectPlaylist:o["b"],getShowIndex:function(){var t=this.list,e=document.getElementsByClassName("list-detail-container")[0],n=Math.max(e.scrollTop-500,0);this.smallIndex=Math.floor(n/71);var i=e.clientHeight+e.scrollTop+300;this.bigIndex=Math.min(Math.floor(i/71),t.length)},scrollToPlayNow:function(){var t=this.list,e=this.playNow,n=t.findIndex((function(t){return t===e.aId})),i=document.getElementsByClassName("song-list")[0];n>-1&&document.getElementsByClassName("list-detail-container")[0].scrollTo(0,71*n+i.offsetTop)}},l["a"]),{},{changeUrlQuery:r["a"],clearPlaying:function(){this.$store.dispatch("updatePlayingList",{list:[this.playNow.aId]})}})},u=d,g=(n("ebd4"),n("2877")),m=Object(g["a"])(u,i,a,!1,null,"02cc13c5",null);e["a"]=m.exports},ebd4:function(t,e,n){"use strict";n("1bbb")},ec27:function(t,e,n){"use strict";n.r(e);n("7f7f");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"top-page"},[e("div",{staticClass:"top-cats-container"},[e("div",{class:"top-platform platform-".concat(t.topInfo.platform)},[e("span",{staticClass:"from-text"},[t._v("FROM")]),e("span",{staticClass:"from-text from-text-2"},[t._v("FROM")]),e("span",{staticClass:"platform-icon iconfont icon-163",on:{click:function(e){return t.updatePlatform("163")}}}),e("span",{staticClass:"platform-icon iconfont icon-qq",on:{click:function(e){return t.updatePlatform("qq")}}})]),e("div",{staticClass:"category-type-list-container hide-scroll"},t._l(t.category,(function(n){return e("div",{staticClass:"category-type-list"},[e("div",{staticClass:"category-type-name"},[t._v(t._s(n.title))]),t._l(n.list,(function(n){return 201!==n.id?e("div",{class:"cate-box ".concat(t.topInfo["".concat(t.topInfo.platform,"id")]===n.id&&"actived"),on:{click:function(e){return t.selectType(n.id)}}},[e("div",{staticClass:"cate-cover",style:"background-image: url('".concat(n.cover,"')")},[e("div",{staticClass:"play-count"},[e("i",{staticClass:"iconfont icon-earphone pr_10"}),t._v(t._s(t.numToStr(n.playCount)))])]),e("div",{staticClass:"cate-name"},[t._v(t._s(n.name))])]):t._e()}))],2)})),0)]),e("PlayListDetail",{attrs:{trueList:t.topInfo["".concat(t.topInfo.platform,"List")],loading:t.loading,"list-info":t.topInfo["".concat(t.topInfo.platform,"Info")]}})],1)},a=[],s=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("96cf"),n("1da1")),o=n("ade3"),c=n("ceb6"),l=n("2f62"),r=n("0828"),p=n("ddc7");function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={name:"Top",components:{PlayListDetail:p["a"]},data:function(){return{category:[],loading:!1}},computed:d({},Object(l["b"])({topInfo:"getTopInfo"})),created:function(){this.$store.dispatch("updateShowCover",!1),this.getCategory()},methods:{updatePlatform:function(t){this.updateTop({platform:t}),this.getCategory()},getCategory:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.topInfo.platform,t.next=3,Object(c["c"])("TOP_CATEGORY",e);case 3:n=t.sent,i=n.data,a=void 0===i?[]:i,this.category=a;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),selectType:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this.topInfo.platform,this.updateTop((n={},Object(o["a"])(n,"".concat(i,"id"),e),Object(o["a"])(n,"".concat(i,"Info"),{}),Object(o["a"])(n,"".concat(i,"List"),[]),n)),this.loading=!0,t.next=5,Object(c["c"])({api:"TOP_SONGS",data:{id:e,_p:i}});case 5:return a=t.sent,this.loading=!1,a.data.desc=a.data.desc.replace(/<br>/g,""),this.updateTop(Object(o["a"])({},"".concat(i,"Info"),a.data)),t.t0=this,t.t1=o["a"],t.t2={},t.t3="".concat(i,"List"),t.next=15,Object(c["l"])(a.data.list);case 15:t.t4=t.sent,t.t5=(0,t.t1)(t.t2,t.t3,t.t4),t.t0.updateTop.call(t.t0,t.t5);case 18:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),updateTop:function(t){this.$store.dispatch("updateTopInfo",t)},numToStr:r["d"]}},g=u,m=(n("16e6"),n("2877")),h=Object(m["a"])(g,i,a,!1,null,"672d0c98",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-6c8802c3.5f09f402.js.map