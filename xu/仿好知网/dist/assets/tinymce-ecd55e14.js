import{w as _,z as V,O as D,r as O,e as I,f as j,P as L,Q as U,h as C,n as S,M as z,_ as N,H as T,k as F,o as R,c as H,a as K,l as q}from"./index-0917c3b4.js";var G=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Y=function(e){return G.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},Q=function(e,t,n){Object.keys(t).filter(Y).forEach(function(i){var o=t[i];typeof o=="function"&&(i==="onInit"?o(e,n):n.on(i.substring(2),function(a){return o(a,n)}))})},W=function(e,t,n,i){var o=e.modelEvents?e.modelEvents:null,a=Array.isArray(o)?o.join(" "):o;_(i,function(c,l){n&&typeof c=="string"&&c!==l&&c!==n.getContent({format:e.outputFormat})&&n.setContent(c)}),n.on(a||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},$=function(e,t,n,i,o,a){i.setContent(a()),n.attrs["onUpdate:modelValue"]&&W(t,n,i,o),Q(e,n.attrs,i)},x=0,E=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return x++,e+"_"+n+x+String(t)},J=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},w=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},X=function(e,t){return w(e).concat(w(t))},Z=function(e){return e==null},k=function(){return{listeners:[],scriptId:E("tiny-script"),scriptLoaded:!1}},ee=function(){var e=k(),t=function(o,a,c,l){var r=a.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=o,r.src=c;var m=function(){r.removeEventListener("load",m),l()};r.addEventListener("load",m),a.head&&a.head.appendChild(r)},n=function(o,a,c){e.scriptLoaded?c():(e.listeners.push(c),o.getElementById(e.scriptId)||t(e.scriptId,o,a,function(){e.listeners.forEach(function(l){return l()}),e.scriptLoaded=!0}))},i=function(){e=k()};return{load:n,reinitialize:i}},ne=ee(),te=function(){return typeof window<"u"?window:global},d=function(){var e=te();return e&&e.tinymce?e.tinymce:null},oe={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},f.apply(this,arguments)},ie=function(e,t,n,i){return e(i||"div",{id:t,ref:n})},ae=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},re=V({props:oe,setup:function(e,t){var n=e.init?f({},e.init):{},i=D(e),o=i.disabled,a=i.modelValue,c=i.tagName,l=O(null),r=null,m=e.id||E("tiny-vue"),y=e.init&&e.init.inline||e.inline,b=!!t.attrs["onUpdate:modelValue"],h=!0,A=e.initialValue?e.initialValue:"",p="",B=function(s){return b?function(){return a!=null&&a.value?a.value:""}:function(){return s?A:p}},g=function(){var s=B(h),u=f(f({},n),{readonly:e.disabled,target:l.value,plugins:X(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:y,setup:function(v){r=v,v.on("init",function(P){return $(P,e,t,v,a,s)}),typeof n.setup=="function"&&n.setup(v)}});J(l.value)&&(l.value.style.visibility=""),d().init(u),h=!1};_(o,function(s){var u;r!==null&&(typeof((u=r.mode)===null||u===void 0?void 0:u.set)=="function"?r.mode.set(s?"readonly":"design"):r.setMode(s?"readonly":"design"))}),_(c,function(s){var u;b||(p=r.getContent()),(u=d())===null||u===void 0||u.remove(r),S(function(){return g()})}),I(function(){if(d()!==null)g();else if(l.value&&l.value.ownerDocument){var s=e.cloudChannel?e.cloudChannel:"6",u=e.apiKey?e.apiKey:"no-api-key",v=Z(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(s,"/tinymce.min.js"):e.tinymceScriptSrc;ne.load(l.value.ownerDocument,v,g)}}),j(function(){d()!==null&&d().remove(r)}),y||(L(function(){h||g()}),U(function(){var s;b||(p=r.getContent()),(s=d())===null||s===void 0||s.remove(r)}));var M=function(s){var u;p=r.getContent(),(u=d())===null||u===void 0||u.remove(r),n=f(f({},n),s),S(function(){return g()})};return t.expose({rerender:M}),function(){return y?ie(C,m,l,e.tagName):ae(C,m,l)}}});const le=z("page",{state:()=>({content:""}),getters:{},actions:{}});const se=le(),{content:ue}=T(se),ce={components:{Editor:re},data(){return{content:ue,init:{language:"zh_CN",plugins:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount textpattern autosave",toolbar:"fullscreen preview spellchecker code searchreplace undo redo restoredraft | forecolor backcolor bold italic underline fontselect fontsizeselect  | formatselect  |                alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | cut copy paste pastetext| blockquote subscript superscript removeformat  |  | indent2em lineheight formatpainter axupimgs |                table image media charmap emoticons hr pagebreak insertdatetime print",fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",menu:{file:{title:"文件",items:"newdocument restoredraft | preview | print "},edit:{title:"编辑",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"插入",items:"link image  |  hr"},view:{title:"查看",items:"visualaid"},format:{title:"格式",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},tools:{title:"工具",items:"spellchecker code"},table:{title:"表格",items:"inserttable tableprops deletetable | cell row column"}},branding:!1}}},props:{text:{default:"默认值"}},methods:{images_upload_handler:(e,t,n)=>{const i="data:image/jpeg;base64,"+e.base64();t(i)},updateContent(e){this.content=e,console.log("什么?",this.content)}},created(){}},de={class:"max"},fe={id:"sample",class:""};function ve(e,t,n,i,o,a){const c=F("Editor");return R(),H("div",de,[K("main",fe,[q(c,{modelValue:o.content,"onUpdate:modelValue":t[0]||(t[0]=l=>o.content=l),onInput:t[1]||(t[1]=l=>a.updateContent()),"api-key":"773hsdnfwx6gbklpnw8gbd2umy23ocv0c4rkrog7e5cn7dps",init:o.init},null,8,["modelValue","init"])])])}const ge=N(ce,[["render",ve],["__scopeId","data-v-790344af"]]);export{re as E,ge as _,le as u};
