webpackJsonp([10],{"97ul":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Jhja"),i=a("Ff4/"),o=a("Au9i"),n={data:function(){return{loadingShow:!1,title:"新增收货地址",province:[],city:[],area:[],ruleForm:{token:sessionStorage.getItem("token"),postcode:"",phone:"",full_address:"",area_id:"",city_id:"",province_id:"",idcard:"",name:""}}},components:{BHeader:r.a,MoutaiLoading:i.a},mounted:function(){var e=this;this._getProvince();var t=this.$route.params.addressId;if("newly"!==t){var a="/personal/getaddressdetail?id="+t+"&token="+this.ruleForm.token;this.$http.get(a).then(function(t){e.ruleForm.id=t.data.data.itemDetail[0].id,e.province=t.data.data.province,e.city=t.data.data.city,e.area=t.data.data.area,e.ruleForm.name=t.data.data.itemDetail[0].name,e.ruleForm.idcard=t.data.data.itemDetail[0].idcard,e.ruleForm.postcode=t.data.data.itemDetail[0].postcode,e.ruleForm.phone=t.data.data.itemDetail[0].phone,e.ruleForm.full_address=t.data.data.itemDetail[0].full_address,e.ruleForm.province_id=t.data.data.itemDetail[0].province_id,e.ruleForm.city_id=t.data.data.itemDetail[0].city_id,e.ruleForm.area_id=t.data.data.itemDetail[0].area_id})}},methods:{submitForm:function(){var e=this;this.$http.post("/personal/addresssave",this.ruleForm).then(function(t){0==t.data.errcode?(e.loadingShow=!0,setTimeout(function(){Object(o.Toast)({message:t.data.errmsg,iconClass:"icon icon-duigou"}),e.loadingShow=!1,window.history.go(-1)},2e3)):Object(o.Toast)({message:t.data.errmsg}),console.log(t.data)})},_getProvince:function(){var e=this;this.$http.get("/province/getzonelist").then(function(t){e.province=t.data.data.dataList})},_getCity:function(e){var t=this,a="/province/getzonelist?id="+e+"&zoneType=2";this.$http.get(a).then(function(e){t.city=e.data.data.dataList,t.area=[],null===e.data.data.dataList[0].name&&(t.ruleForm.city_id=null,t.ruleForm.area_id=null)})},_getArea:function(e){var t=this,a="/province/getzonelist?id="+e+"&zoneType=3";this.$http.get(a).then(function(e){t.area=e.data.data.dataList})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"address"},[a("b-header",{attrs:{title:e.title}}),e._v(" "),a("div",{staticClass:"address-container"},[a("mt-field",{attrs:{label:"收货人："},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}},[e._v("*")]),e._v(" "),a("mt-field",{attrs:{label:"身份证号："},model:{value:e.ruleForm.idcard,callback:function(t){e.$set(e.ruleForm,"idcard",t)},expression:"ruleForm.idcard"}},[e._v("*")]),e._v(" "),a("span",{staticClass:"help-block"},[e._v("因此货物贵重，为了保证您的产品和财产安全，请输入身份证号码并以此作为收货凭证，谢谢")]),e._v(" "),a("a",{staticClass:"mint-cell mint-field"},[a("div",{staticClass:"mint-cell-wrapper"},[e._m(0),e._v(" "),a("div",{staticClass:"mint-cell-value"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.province_id,expression:"ruleForm.province_id"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleForm,"province_id",t.target.multiple?a:a[0])},function(t){return e._getCity(e.ruleForm.province_id)}]}},[a("option"),e._v(" "),e._l(e.province,function(t,r){return a("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.city_id,expression:"ruleForm.city_id"}],on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleForm,"city_id",t.target.multiple?a:a[0])},function(t){return e._getArea(e.ruleForm.city_id)}]}},[a("option"),e._v(" "),e._l(e.city,function(t,r){return a("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.ruleForm.area_id,expression:"ruleForm.area_id"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.ruleForm,"area_id",t.target.multiple?a:a[0])}}},[a("option"),e._v(" "),e._l(e.area,function(t,r){return a("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name))])})],2),e._v(" "),a("div",{staticClass:"mint-field-other"},[e._v("*")])])])]),e._v(" "),a("mt-field",{attrs:{label:"详细地址："},model:{value:e.ruleForm.full_address,callback:function(t){e.$set(e.ruleForm,"full_address",t)},expression:"ruleForm.full_address"}},[e._v("*")]),e._v(" "),a("mt-field",{attrs:{label:"手机号码："},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}},[e._v("*")]),e._v(" "),a("mt-field",{attrs:{label:"邮编："},model:{value:e.ruleForm.postcode,callback:function(t){e.$set(e.ruleForm,"postcode",t)},expression:"ruleForm.postcode"}}),e._v(" "),a("mt-button",{attrs:{type:"danger"},on:{click:e.submitForm}},[e.loadingShow?e._e():a("span",[e._v("保存收货人信息")]),e._v(" "),e.loadingShow?a("moutai-loading"):e._e()],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mint-cell-title"},[t("span",{staticClass:"mint-cell-text"},[this._v("所在地区：")])])}]};var d=a("VU/8")(n,l,!1,function(e){a("o3WP")},null,null);t.default=d.exports},o3WP:function(e,t){}});
//# sourceMappingURL=10.03e4044a908e1c311483.js.map