webpackJsonp([13],{jzGn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("8l5Z"),c=a("Ff4/"),l=a("ATGE"),i=a("T452"),n={data:function(){return{headStatus:!1,cartData:[],loadingShow:!0,isselectall:!1,quantity:10,inStatus:1,modalzIndex:-1,modalTitle:"",modalContent:"",checked:[],selectCount:0}},components:{Modal:s.a,MoutaiLoading:c.a},mounted:function(){var t=this;setTimeout(function(){t.loadingShow=!1},500),this._getcartData(),l.a.$on("select",function(e){t.headStatus="on"==e})},computed:{selletmentAmount:function(){var t=this,e=this.checked.filter(function(t){return t});this.selectCount=e.length;var a=0;return this.checked.forEach(function(e,s){if(e){var c=t.cartData[s];t.cartData.length>0&&(a+=c.count_price*c.num)}}),a}},methods:{changeMoney:function(t,e,a){if(this.checked[e]=!0,this.onallunAll(),this.checked.push(!1),this.checked.pop(),1==t)a.num++;else if(-1==t)a.num--,a.num<1&&(a.num=1);else if(a.num<1)return this.modalIsShow("温馨提示","单件商品数量不能少于1件"),void(a.num=1)},_getcartData:function(){var t=this,e="/Cart/cart_list?token="+sessionStorage.getItem("token");this.$http.get(e).then(function(e){e.data.errcode===i.a?(t.cartData=e.data.data,t.checked=[],t.cartData.forEach(function(e){t.checked.push(!1)})):t.cartData=[],console.log(e.data)})},checkout:function(){var t=this;this.checked.indexOf(!0)>-1?(console.log("正常提交"),this.loadingShow=!0,setTimeout(function(){t.loadingShow=!1,t.$router.push({path:"/settlement"})},1e3)):this.modalIsShow("温馨提示","请选择需要结算的商品")},onallunAll:function(){for(var t=0;t<this.checked.length;t++){if(!1===this.checked[t])return void(this.isselectall=!1);this.isselectall=!0}},allunAll:function(){for(var t=0;t<this.checked.length;t++)this.checked[t]=this.isselectall;this.checked.push(!1),this.checked.pop()},modalIsShow:function(t,e){this.inStatus=0,this.modalzIndex=1050,this.modalTitle=t,this.modalContent=e},modelIsHide:function(){var t=this;this.inStatus=1,setTimeout(function(){t.modalzIndex=-1},300)},isConfirmCancel:function(t){var e=this;if(this.modelIsHide(),t===i.a){if(this.delFalg){this.delFalg=!1;var a="/Cart/cart_del?id="+this.goodsID+"&token="+sessionStorage.getItem("token");this.$http.post(a).then(function(t){t.data.errcode===i.a&&(e.isselectall=!1,e._getcartData())})}}else this.delFalg=!1},del:function(t){this.delFalg=!0,this.goodsID=t,this.modalIsShow("提示","确认将该商品从购物车删除吗？")}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-cart"},[a("div",{staticClass:"inner-container"},[t._m(0),t._v(" "),a("h3",{staticClass:"inner-title"},[t._v("\n      您的购物车（\n      "),a("span",{staticClass:"num"},[t._v(t._s(t.cartData.length))]),t._v("\n      ）\n    ")]),t._v(" "),a("div",{staticClass:"cart-select-title"},[a("label",{staticClass:"select-icon",class:{selected:t.isselectall}},[a("i",{staticClass:"icon_select"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.isselectall,expression:"isselectall"}],staticStyle:{display:"none"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isselectall)?t._i(t.isselectall,null)>-1:t.isselectall},on:{change:[function(e){var a=t.isselectall,s=e.target,c=!!s.checked;if(Array.isArray(a)){var l=t._i(a,null);s.checked?l<0&&(t.isselectall=a.concat([null])):l>-1&&(t.isselectall=a.slice(0,l).concat(a.slice(l+1)))}else t.isselectall=c},t.allunAll]}}),t._v(" "),a("b",[t._v("全选")])]),t._v(" "),a("span",[t._v("定制状态")])]),t._v(" "),t._l(t.cartData,function(e,s){return t.cartData.length>0?a("div",{key:s,staticClass:"cart-item"},[a("div",{staticClass:"cart-item-title"},[a("span",{staticClass:"name"},[t._v("茅台飞天系列")]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(e.add_time))]),t._v(" "),a("span",{staticClass:"type"},[t._v("酒盒定制")])]),t._v(" "),a("div",{staticClass:"cart-item-container"},[a("div",{staticClass:"cart-item-content"},[a("label",{staticClass:"cart-item-select",class:{selected:t.checked[s]}},[a("i",{staticClass:"icon_select"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checked[s],expression:"checked[index]"}],staticClass:"select-icon",staticStyle:{display:"none"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checked[s])?t._i(t.checked[s],null)>-1:t.checked[s]},on:{change:[function(e){var a=t.checked[s],c=e.target,l=!!c.checked;if(Array.isArray(a)){var i=t._i(a,null);c.checked?i<0&&t.$set(t.checked,s,a.concat([null])):i>-1&&t.$set(t.checked,s,a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.checked,s,l)},t.onallunAll]}})]),t._v(" "),t._m(1,!0),t._v(" "),a("div",{staticClass:"cart-item-detail"},[a("div",{staticClass:"cart-item-total"},[a("div",{staticClass:"cart-item-price"},[t._v("￥"+t._s(e.count_price))]),t._v(" "),a("div",{staticClass:"cart-item-num"},[a("button",{staticClass:"sub",on:{click:function(a){return t.changeMoney(-1,s,e)}}},[t._v("-")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.num,expression:"item.num"}],attrs:{type:"number"},domProps:{value:e.num},on:{blur:function(a){return t.changeMoney(0,s,e)},input:function(a){a.target.composing||t.$set(e,"num",a.target.value)}}}),t._v(" "),a("button",{staticClass:"add",on:{click:function(a){return t.changeMoney(1,s,e)}}},[t._v("+")])])]),t._v(" "),a("p",[t._v("商品规格："+t._s(e.name))])])]),t._v(" "),a("div",{staticClass:"btn-delete"},[a("button",{on:{click:function(a){return t.del(e.id)}}},[t._v("删除")])])])]):t._e()}),t._v(" "),a("div",{staticClass:"cart-total",class:{"move-head":t.headStatus}},[a("label",{staticClass:"select-icon",class:{selected:t.isselectall}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.isselectall,expression:"isselectall"}],staticStyle:{display:"none"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isselectall)?t._i(t.isselectall,null)>-1:t.isselectall},on:{change:[function(e){var a=t.isselectall,s=e.target,c=!!s.checked;if(Array.isArray(a)){var l=t._i(a,null);s.checked?l<0&&(t.isselectall=a.concat([null])):l>-1&&(t.isselectall=a.slice(0,l).concat(a.slice(l+1)))}else t.isselectall=c},t.allunAll]}}),t._v(" "),a("i",{staticClass:"icon_select"}),t._v(" "),a("span",[t._v("全选")])]),t._v(" "),a("div",{staticClass:"amount"},[a("span",[t._v("合计：")]),a("b",[t._v("￥"+t._s(t.selletmentAmount)+".00")])]),t._v(" "),a("button",{staticClass:"btn",on:{click:t.checkout}},[t._v("去结算"),a("span",[t._v(" ("+t._s(t.selectCount)+"件)")])])])],2),t._v(" "),a("modal",{attrs:{modalContent:t.modalContent,inStatus:t.inStatus,modalzIndex:t.modalzIndex,modalTitle:t.modalTitle},on:{selectConfirmCancel:t.isConfirmCancel}}),t._v(" "),t.loadingShow?a("div",{staticClass:"center-loading"},[a("moutai-loading")],1):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{staticClass:"title"},[e("span",[this._v("购物车")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"cart-item-img"},[e("img",{attrs:{src:"http://cs.zsb9.cn./uploads/20180120/5a636022660ad.png"}})])}]};var r=a("VU/8")(n,o,!1,function(t){a("mijq")},"data-v-3be67ceb",null);e.default=r.exports},mijq:function(t,e){}});
//# sourceMappingURL=13.703974923e4cd2a285db.js.map